# ๐๏ธ ุจููุฉ ุงููุดุฑูุน ุงููุงููุฉ - Mudarib Accounting System

## 1. ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ูููุฑ ุดุฑุญูุง ุชูุตููููุง ููููู ุงููุฌูุฏุงุช ูุงููููุงุช ูู ุงููุดุฑูุนุ ูููุถุญ ูุธููุฉ ูู ุฌุฒุก ุฑุฆูุณู. ุงููุฏู ูู ุชูููุฑ ูุฑุฌุน ุดุงูู ูููุทูุฑูู ูููู ููููุฉ ุจูุงุก ูุชุทููุฑ ุงูุชุทุจูู.

---

## 2. ุงูุชูููุงุช ุงูุฃุณุงุณูุฉ

*   **ุงูุฅุทุงุฑ ุงูุนุงู:** Next.js 15 (with App Router)
*   **ูุบุฉ ุงูุจุฑูุฌุฉ:** TypeScript
*   **ุงููุงุฌูุฉ ุงูุฎูููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช:** Firebase (Firestore, Authentication, Storage)
*   **ุงูุฐูุงุก ุงูุงุตุทูุงุนู:** Google AI & Genkit
*   **ุงูุชุตููู:** Tailwind CSS + ShadCN UI
*   **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ:** React Context + Zustand (ุถููููุง)
*   **ุงูููุงุฐุฌ:** React Hook Form + Zod

---

## 3. ูููู ุงููุฌูุฏุงุช ุงูุฑุฆูุณู

```
/
โโโ public/                 # ุงููููุงุช ุงูุนุงูุฉ (ุตูุฑุ ุฃููููุงุช)
โโโ src/
โ   โโโ app/                # ูุฌูุฏ ุงูุตูุญุงุช ูุงูููููุงุช ุงูุฃุณุงุณูุฉ (App Router)
โ   โ   โโโ (auth)/         # ูุฌููุนุฉ ุงูุตูุญุงุช ุงูุฎุงุตุฉ ุจุงููุตุงุฏูุฉ
โ   โ   โโโ (main)/         # ูุฌููุนุฉ ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
โ   โ   โโโ api/            # ููุงุท API (ุฅู ูุฌุฏุช)
โ   โ   โโโ layout.tsx      # ุงูุชุฎุทูุท ุงูุฌุฐุฑู ููุชุทุจูู
โ   โ   โโโ page.tsx        # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Landing Page)
โ   โ
โ   โโโ components/         # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โ   โโโ auth/           # ููููุงุช ุงููุตุงุฏูุฉ (ูููุฐุฌ ุงูุฏุฎูู)
โ   โ   โโโ layout/         # ููููุงุช ุงูุชุฎุทูุท (ุงูุดุฑูุท ุงูุฌุงูุจูุ ุงูุนููู)
โ   โ   โโโ reports/        # ููููุงุช ุฎุงุตุฉ ุจุงูุชูุงุฑูุฑ
โ   โ   โโโ settings/       # ููููุงุช ุฎุงุตุฉ ุจุงูุฅุนุฏุงุฏุงุช
โ   โ   โโโ ui/             # ููููุงุช ShadCN UI ุงูุฃุณุงุณูุฉ
โ   โ
โ   โโโ context/            # ูุฒูุฏุงุช ุงูุญุงูุฉ ุงูุนุงูุฉ (React Context)
โ   โ   โโโ auth-context.tsx
โ   โ   โโโ theme-customization-context.tsx
โ   โ
โ   โโโ hooks/              # ุฎุทุงูุงุช React ุงููุฎุตุตุฉ
โ   โ
โ   โโโ lib/                # ุงูุฃุฏูุงุช ูุงูููุชุจุงุช ุงููุณุงุนุฏุฉ
โ   โ   โโโ auth/           # ุฃุฏูุงุช ุงููุตุงุฏูุฉ ูุงูุตูุงุญูุงุช
โ   โ   โโโ firebase/       # ุฅุนุฏุงุฏุงุช ุงุชุตุงู Firebase
โ   โ   โโโ firebase-admin.ts # ุฅุนุฏุงุฏุงุช Firebase Admin SDK (ููุฎุงุฏู)
โ   โ   โโโ types.ts        # ุชุนุฑููุงุช TypeScript ูุฃููุงุน ุงูุจูุงูุงุช
โ   โ   โโโ utils.ts        # ุฏูุงู ูุณุงุนุฏุฉ ุนุงูุฉ
โ   โ
โ   โโโ ai/                 # ูู ูุง ูุชุนูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
โ       โโโ genkit.ts       # ุฅุนุฏุงุฏ Genkit
โ       โโโ flows/          # ูููุงุช ุงูู Flows ุงูุฎุงุตุฉ ุจู Genkit
โ
โโโ firebase.json           # ุฅุนุฏุงุฏุงุช Firebase CLI
โโโ firestore.rules         # ููุงุนุฏ ุฃูุงู Firestore
โโโ storage.rules           # ููุงุนุฏ ุฃูุงู Firebase Storage
โโโ next.config.js          # ุฅุนุฏุงุฏุงุช Next.js
โโโ tailwind.config.ts      # ุฅุนุฏุงุฏุงุช Tailwind CSS
```

---

## 4. ุดุฑุญ ุชูุตููู ูููุฌูุฏุงุช ูุงููููุงุช ุงููุงูุฉ

### **`src/app/`**

ูุฐุง ูู ููุจ ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู App Router.

*   **`layout.tsx`**: ุงูููู ุงูุฌุฐุฑู ุงูุฐู ูุบูู ุงูุชุทุจูู ุจุงููุงูู. ูุญุชูู ุนูู:
    *   `<html>` ู `<body>` tags.
    *   **`Providers`**: ุงููููู ุงูุฐู ูุฌูุน ูู ูุฒูุฏุงุช ุงูุญุงูุฉ (ูุซู `AuthProvider`, `ThemeProvider`).
    *   ุฅุถุงูุฉ ุงูุฎุทูุท ุงูุนุงูุฉ ู `Toaster` ููุฅุดุนุงุฑุงุช.

*   **`page.tsx`**: ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุชุทุจูู (ุตูุญุฉ ุงููุจูุท) ุงูุชู ุชุธูุฑ ูููุณุชุฎุฏู ุบูุฑ ุงููุณุฌู.

*   **`(auth)`**: ูุฌููุนุฉ ุชูุฌูู ุชุญุชูู ุนูู ุตูุญุงุช ุงููุตุงุฏูุฉ (ุชุณุฌูู ุงูุฏุฎููุ ูุณูุช ูููุฉ ุงููุฑูุฑ). ูุฐู ุงูุตูุญุงุช ูุง ุชุณุชุฎุฏู ุงูุชุฎุทูุท ุงูุฑุฆูุณู ููุชุทุจูู.

*   **`(main)`**: ูุฌููุนุฉ ุชูุฌูู ุชุญุชูู ุนูู ุฌููุน ุตูุญุงุช ุงููุธุงู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู.
    *   **`layout.tsx`**: ุงูุชุฎุทูุท ุงูุฑุฆูุณู ุงูุฐู ูุธูุฑ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู. ูุญุชูู ุนูู ุงูุดุฑูุท ุงูุนูููุ ุงูุดุฑูุท ุงูุฌุงูุจูุ ูููุทูุฉ ุงููุญุชูู ุงูุฑุฆูุณูุฉ.
    *   **`dashboard/page.tsx`**: ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ.
    *   **`clients/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนููุงุก.
    *   **`suppliers/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุฑุฏูู.
    *   **`bookings/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุญุฌูุฒุงุช ุงูุทูุฑุงู.
    *   **`visas/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูููุฒุง.
    *   **`subscriptions/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช.
    *   **`accounts/vouchers/list/page.tsx`**: ุตูุญุฉ ุณุฌู ุงูุณูุฏุงุช ุงูููุญุฏ.
    *   **`reports/debts/page.tsx`**: ุตูุญุฉ ุชูุฑูุฑ ุงูุฃุฑุตุฏุฉ ูุงูุฏููู.
    *   **`reports/account-statement/page.tsx`**: ุตูุญุฉ ูุดู ุงูุญุณุงุจ.
    *   **`users/page.tsx`**: ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช.
    *   **`settings/page.tsx`**: ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุฑุฆูุณูุฉ.

*   **`[feature]/actions.ts`**: ูููุงุช ุงูุฃูุงูุฑ ุงูุฎูููุฉ (Server Actions) ููู ููุฒุฉ.
    *   **ูุซุงู: `src/app/bookings/actions.ts`**: ูุญุชูู ุนูู ุฏูุงู ูุซู `addBooking`, `updateBooking`, `deleteBooking` ุงูุชู ุชุชุนุงูู ูุจุงุดุฑุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุฌูุฉ ุงูุฎุงุฏู.
    *   **ุงููุจุฏุฃ:** ุฃู ุนูููุฉ ุชุชุทูุจ ุชุนุฏูู ุงูุจูุงูุงุช ูู Firestore ูุฌุจ ุฃู ุชุชู ุนุจุฑ ูุฐู ุงููููุงุช ูุถูุงู ุงูุฃูุงู ููุตู ุงูููุทู.

### **`src/components/`**

*   **`ui/`**: ูุญุชูู ุนูู ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฃุณุงุณูุฉ ูู ููุชุจุฉ **ShadCN UI** (ูุซู `Button`, `Input`, `Card`). ูุง ูุชู ุชุนุฏูู ูุฐู ุงููููุงุช ูุจุงุดุฑุฉ ุฅูุง ูุบุฑุถ ุฅุตูุงุญ ุฃุฎุทุงุก ุฃุณุงุณูุฉ ูููุง.
*   **`layout/`**: ุงูููููุงุช ุงูุชู ุชุดูู ุงููููู ุงูุนุงู ููุตูุญุงุช ุงูุฏุงุฎููุฉ ูุซู:
    *   `main-layout.tsx`: ุงููููู ุงูุฑุฆูุณู ููุชุทุจูู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู.
    *   `main-nav.tsx`: ุดุฑูุท ุงูุชููู ุงูุนููู.
    *   `user-nav.tsx`: ูุงุฆูุฉ ุงููุณุชุฎุฏู ุงูููุณุฏูุฉ.
    *   `preloader.tsx`: ุดุงุดุฉ ุงูุชุญููู ุงูุฃูููุฉ ููุชุทุจูู.
*   **`auth/`**: ููููุงุช ุฎุงุตุฉ ุจุงููุตุงุฏูุฉุ ูุฃูููุง `login-form.tsx`.
*   **`[feature]/components/`**: ูู ููุฒุฉ ุฑุฆูุณูุฉ (ูุซู `clients`, `bookings`) ุชุญุชูู ุนูู ูุฌูุฏ `components` ุฎุงุต ุจูุง ููููููุงุช ุงูุชู ูุง ุชุณุชุฎุฏู ุฅูุง ูู ูุทุงู ุชูู ุงูููุฒุฉ (ูุซู ุฌุฏุงูู ุงูุนุฑุถุ ููุงุฐุฌ ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู).

### **`src/lib/`**

*   **`auth/`**:
    *   `actions.ts`: ูุญุชูู ุนูู ุฃูู ุงูุฏูุงู ุงููุชุนููุฉ ุจุงููุตุงุฏูุฉ ูู ุฌูุฉ ุงูุฎุงุฏูุ ูุซู `getCurrentUserFromSession` ููุชุญูู ูู ุฌูุณุฉ ุงููุณุชุฎุฏูุ ู `createSessionCookie` ูุฅูุดุงุก ุฌูุณุฉ ุขููุฉ.
    *   `permissions.ts`: **ูุตุฏุฑ ุงูุญูููุฉ ุงููุฑูุฒู** ูุฌููุน ุตูุงุญูุงุช ุงููุธุงู. ููุนุฑูู ููุง ูู ุตูุงุญูุฉ ููุตููุงุ ููุญุชูู ุนูู ุฏุงูุฉ `hasPermission` ููุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู.
*   **`firebase.ts`**: ููู ุฅุนุฏุงุฏ Firebase **ูููุชุตูุญ (Client-side)**. ููุณุชุฎุฏู ููุนูููุงุช ุงูุชู ุชุชู ูู ุฌูุฉ ุงููุณุชุฎุฏู ูุจุงุดุฑุฉ ูุซู ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ูุฑูุฑ.
*   **`firebase-admin.ts`**: ููู ุฅุนุฏุงุฏ Firebase Admin SDK **ููุฎุงุฏู (Server-side)**. ููุณุชุฎุฏู ูู ุฌููุน ูููุงุช `actions.ts` ูููุตูู ุฅูู Firestore ูุฎุฏูุงุช Firebase ุงูุฃุฎุฑู ุจุตูุงุญูุงุช ูุงููุฉ.
*   **`types.ts`**: ููู ูุฑูุฒู ูุญุชูู ุนูู ุฌููุน ุชุนุฑููุงุช TypeScript ูุฃููุงุน ุงูุจูุงูุงุช ูู ุงููุดุฑูุน (`User`, `Client`, `BookingEntry`, `JournalVoucher`, etc.). **ุฃู ูููู ุจูุงูุงุช ุฌุฏูุฏ ูุฌุจ ุฃู ููุนุฑูู ููุง.**
*   **`utils.ts`**: ุฏูุงู ูุณุงุนุฏุฉ ุนุงูุฉ ููุชูุฑุฑุฉ ุงูุงุณุชุฎุฏุงู ูู ุงููุดุฑูุน.

### **`src/ai/`**

*   **`genkit.ts`**: ุงูููู ุงููุฑูุฒู ูุชููุฆุฉ Genkit ูุชุญุฏูุฏ ุงูููุฏูู ุงููุณุชุฎุฏู (ูุซู `gemini-1.5-flash`).
*   **`flows/`**: ูู ููู ููุง ููุซู Flow ูุนูู ูู Genkitุ ููู ุนุจุงุฑุฉ ุนู ุฏุงูุฉ ุชููู ุจุชูููุฐ ูููุฉ ูุญุฏุฏุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.
    *   **ูุซุงู: `extract-ticket-data.ts`**: ูุญุชูู ุนูู prompt ูุชุนุฑููุงุช zod ุงูุฎุงุตุฉ ุจุฅุฏุฎุงู ูุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ูุชุญููู ูููุงุช ุชุฐุงูุฑ ุงูุทูุฑุงู.

---

## 5. ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ (Firestore Collections)

ุงููุธุงู ูุนุชูุฏ ุนูู ูุงุนุฏุฉ ุจูุงูุงุช Firestoreุ ููุฐู ูู ุฃูู ุงููุฌููุนุงุช (ุงูุฌุฏุงูู) ุงูุญุงููุฉ:

| ุงุณู ุงููุฌููุนุฉ (Collection)         | ุงููุตู                                                                                                              |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| **`journal-vouchers`**             | **ุงูุฌุฏูู ุงููุฑูุฒู ุงูุฌุฏูุฏ**. ุฌููุน ุงูุนูููุงุช ุงููุงููุฉ (ุญุฌูุฒุงุชุ ููุฒุงุ ุณูุฏุงุชุ ุงุดุชุฑุงูุงุช) ุชูุณุฌู ููุง ููููุฏ ูุญุงุณุจูุฉ ูุฒุฏูุฌุฉ. |
| **`clients`**                      | ุฌุฏูู ุงูุนูุงูุงุชุ ูุญุชูู ุนูู ุจูุงูุงุช ุงูุนููุงุก ูุงูููุฑุฏูู ูููุงูู.                                                           |
| **`users`**                        | ุจูุงูุงุช ููุธูู ุงููุธุงู (ุงููุณุชุฎุฏููู)ุ ุจูุง ูู ุฐูู ุฃุฏูุงุฑูู ูุตูุงุญูุงุชูู.                                                  |
| **`roles`**                        | ุชุนุฑูู ุงูุฃุฏูุงุฑ ุงููุฎุชููุฉ (ูุฏูุฑุ ูุญุงุณุจ) ูุงูุตูุงุญูุงุช ุงููุฑุชุจุทุฉ ุจูู ุฏูุฑ.                                                   |
| **`boxes`**                        | ูุงุฆูุฉ ุงูุตูุงุฏูู ุงููุงููุฉ (ุงูุญุณุงุจุงุช ุงูููุฏูุฉ).                                                                          |
| **`exchanges`**                    | ูุงุฆูุฉ ุงูุจูุฑุตุงุช ูุญุณุงุจุงุชูุง.                                                                                           |
| **`sequences`**                    | ุนุฏุงุฏุงุช ูุชูููุฏ ุฃุฑูุงู ุชุณูุณููุฉ ูุฑูุฏุฉ ููููุงุชูุฑ ูุงูุณูุฏุงุช.                                                              |
| **`settings`**                     | ูุซููุฉ ูุงุญุฏุฉ (`app_settings`) ุชุญุชูู ุนูู ุฌููุน ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงููุงุจูุฉ ููุชุฎุตูุต.                                       |
| **`audit_logs`**                   | ุณุฌู ูุฌููุน ุงููุดุงุทุงุช ุงููุงูุฉ ุงูุชู ุชุญุฏุซ ูู ุงููุธุงู (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู).                                               |
| **`subscription_installments`**    | ุฌุฏูู ุฃูุณุงุท ุงูุงุดุชุฑุงูุงุช ุงููุณุชุญูุฉ.                                                                                    |
| **`flight_reports`**, **`segments`** | ุฌุฏุงูู ูุชุฎุตุตุฉ ูุนูููุงุช ุชุญููููุฉ ูุนููุฉ.                                                                               |

---

ูุฐู ุงูุจููุฉ ุชููุฑ ุฃุณุงุณูุง ููููุง ูููุธููุง ูุณูู ูููู ูุชุทููุฑู. ุจูุงุกู ุนูู ูุฐุง ุงูููููุ ูููููุง ุงูุขู ุชุญุฏูุฏ ุฃูุงูู ุฅุถุงูุฉ ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ (ูุซู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช) ูููููุฉ ุฑุจุทูุง ุจุงูุตูุญุงุช ูุงูููุงุฐุฌ ุงูุญุงููุฉ ุจุฏูุฉ.
